server {
  listen      80;
  server_name lantern.cottagelabs.com;
  return 301 https://lantern.cottagelabs.com$request_uri;
}
server {
  listen 443 ssl;
  server_name lantern.cottagelabs.com;
  include includes/cl-wildcard-ssl.conf;
  root /home/cloo/live/LanternPM/lantern;

  location /content {
    try_files $uri $uri.html $uri.md $uri/index $uri/index.html $uri/index.md /404 =404;
  }

  location / {
    try_files /serve/$uri.html /serve/$uri/index.html /404.html =404;
  }
  
  location /static {
    try_files $uri /serve/$uri =404;
    expires 30d;
  }
}

server {
    listen      80;
    server_name compliance.cottagelabs.com;
    return 301 https://compliance.cottagelabs.com$request_uri;
}
server {
  listen 443 ssl;
  server_name compliance.cottagelabs.com;
  include includes/cl-wildcard-ssl.conf;
  root /home/cloo/live/LanternPM/wellcome;

  location /content {
    try_files $uri $uri.html $uri.md $uri/index $uri/index.html $uri/index.md /404 =404;
  }

  location / {
    try_files /serve/$uri.html /serve/$uri/index.html /404.html =404;
  }
  
  location /static {
    try_files $uri /serve/$uri =404;
    expires 30d;
  }
}


server {
  listen 80;
  server_name lantern.test.cottagelabs.com;
  root /home/cloo/dev/LanternPM/lantern;

  location /content {
    try_files $uri $uri.html $uri.md $uri/index $uri/index.html $uri/index.md /404 =404;
  }

  location / {
    try_files /serve/$uri.html /serve/$uri/index.html /404.html =404;
  }
  
  location /static {
    try_files $uri /serve/$uri =404;
    expires 30d;
  }
}

server {
  listen 80;
  server_name wellcome.test.cottagelabs.com;
  root /home/cloo/dev/LanternPM/wellcome;

  location /content {
    try_files $uri $uri.html $uri.md $uri/index $uri/index.html $uri/index.md /404 =404;
  }

  location / {
    try_files /serve/$uri.html /serve/$uri/index.html /404.html =404;
  }
  
  location /static {
    try_files $uri /serve/$uri =404;
    expires 30d;
  }
}

